<div class="max-w-4xl mx-auto px-4">
  <div class="space-y-8">
    <% if alert = flash[:alert] %>
      <p class="mb-4 inline-flex items-center rounded-md bg-red-50 px-3 py-2 text-sm font-medium text-red-700 ring-1 ring-inset ring-red-200" id="alert"><%= alert %></p>
    <% end %>

    <% if notice = flash[:notice] %>
      <p class="mb-4 inline-flex items-center rounded-md bg-green-50 px-3 py-2 text-sm font-medium text-green-700 ring-1 ring-inset ring-green-200" id="notice"><%= notice %></p>
    <% end %>

    <header class="text-center">
      <h1 class="heading-page">Profile Settings</h1>
    </header>

    <section class="card">
      <div class="card-section stack-md">
        <%= link_to "Back to profile", profile_path, class: "text-blue-600 transition-colors font-bold underline text-lg" %>
        
        <div class="divider"></div>

        <%= form_with url: profile_path, method: :patch, scope: :profile_settings, local: true do |form| %>
          <div>
            <h2 class="heading-section mb-4">Strava Activity Sync</h2>
            <p class="text-sm text-slate-600 mb-4">When enabled, new Strava activities will sync automatically and attempt to match your planned workouts.</p>
            
            <label class="flex items-center gap-3 cursor-pointer">
              <%= form.check_box :enable_strava_webhooks, { checked: @user.strava_webhook_subscription_id.present?, class: "h-5 w-5 text-blue-600 rounded border-slate-300 flex-shrink-0" }, "1", "0" %>
              <span class="text-sm font-medium text-slate-700">
                Enable webhook sync (<%= @user.strava_webhook_subscription_id.present? ? "currently on" : "currently off" %>)
              </span>
            </label>
          </div>

          <div class="divider"></div>

          <div class="flex items-center gap-3">
            <%= form.submit "Save settings", class: "btn-primary" %>
            <%= link_to "Cancel", profile_path, class: "btn-soft" %>
          </div>
        <% end %>
      </div>
    </section>
  </div>
</div>
