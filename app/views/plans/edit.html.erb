<div class="mx-auto md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>

  <% if alert.present? %>
    <p class="py-2 px-3 bg-red-50 mb-5 text-red-500 font-medium rounded-lg inline-block" id="alert"><%= alert %></p>
  <% end %>

  <div class="text-center mb-8">
    <h1 class="font-bold text-5xl text-slate-800 mb-4">Edit Your Plan</h1>
    <p class="text-sm text-slate-600 mb-6 font-semibold">Update your training schedule</p>
  </div>

  <% if @plan.custom_creation? %>
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
      <h3 class="font-semibold text-blue-800 mb-2">Custom Training Plan</h3>
      <p class="text-blue-700 text-sm">This is a custom training plan. You can edit individual workouts using the calendar below.</p>
      
      <% if @plan.photos.attached? %>
        <div class="mt-4">
          <h4 class="font-medium text-blue-800 mb-2">Uploaded Photos:</h4>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
            <% @plan.photos.each do |photo| %>
              <div class="border rounded-lg overflow-hidden">
                <%= image_tag photo, class: "w-full h-24 object-cover" %>
              </div>
            <% end %>
          </div>
          <% if Activity.where(plan_id: @plan.id).empty? %>
            <%= link_to "Process Photos to Create Workouts", process_photos_plan_path(@plan), 
                method: :post, 
                class: "inline-block px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300" %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded- shadow-md mb-8">
    <div class="mb-2">
      <h2 class="font-semibold text-2xl text-slate-700 mb-4">Modify Plan Details</h2>
      
      <div class="bg-white/60 rounded-lg p-3 shadow-sm">
        <%= render "form", plan: @plan %>
      </div>
    </div>

    <div class="flex gap-3 mt-6">
      <%= link_to "Back to plans", plans_path, class: "rounded-lg py-3 px-5 bg-slate-100 text-slate-700 font-medium hover:bg-slate-200 transition duration-300" %>
      <%= link_to "View this plan", @plan, class: "rounded-lg py-3 px-5 bg-indigo-100 text-indigo-700 font-medium hover:bg-indigo-200 transition duration-300" %>
    </div>
  </div>
</div>
